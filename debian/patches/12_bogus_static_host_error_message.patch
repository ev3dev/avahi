--- avahi-daemon/static-hosts.c.orig	2006-12-26 11:42:17.000000000 +0100
+++ avahi-daemon/static-hosts.c	2007-01-07 19:18:27.000000000 +0100
@@ -114,7 +114,7 @@
 
     if (!h->group)
         if (!(h->group = avahi_s_entry_group_new (avahi_server, entry_group_callback, h))) {
-            avahi_log_error("avahi_s_entry_group_new() failed: %s", avahi_strerror(err));
+            avahi_log_error("avahi_s_entry_group_new() failed: %s", avahi_strerror(avahi_server_errno(avahi_server)));
             return;
         }
 
@@ -123,7 +123,7 @@
         return;
     }
 
-    if ((err = avahi_server_add_address(avahi_server, h->group, AVAHI_IF_UNSPEC, AVAHI_PROTO_UNSPEC, 0, h->host, &a))) {
+    if ((err = avahi_server_add_address(avahi_server, h->group, AVAHI_IF_UNSPEC, AVAHI_PROTO_UNSPEC, 0, h->host, &a)) < 0) {
         avahi_log_error ("Static host name %s: avahi_server_add_address failure: %s", h->host, avahi_strerror(err));
         return;
     }
